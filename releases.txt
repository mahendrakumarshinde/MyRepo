#################################################################################################################################################################################
Date: 21 JUNE 2021
Contributed By : Vikas Gaikwad,Sanketa Patil,Sidramayya Swami,Mahendrakumar Shinde 
Product Name : vEdge
Release Name : Porting firmware vEdge2.1 v3.3.0,3.3.1,3.2.0,3.4.0 to vEdge1.6 3.0.7 
Firmware Versions :
		1. vEdge_main(STM32) : 3.0.7
		2. vEdge_wifi (ESP32): 3.0.7
		3. Bootloader L1     : 2.0.0
		4. Bootloader L2     : 2.1.0
		5. Factory Firmware  : 2.0.0 
################################################################################################################################################################################

# Release Descriptions : 

   1. Resolved the device migration in secured mode from one server to other when credentials are sent from APP. Secured mode credentials (Cert, Diag, MQTT, HTTP, WIFI) are sent with single selection or after Sent credentials after WIFI De-Activate from APP.
   2. Resolved the After OTA every 30 min interval FFTs are not getting recorded. During OTA validation process configured http endpoints are updating with default http endpoints.
   3. After OTA firmware validation needs to be handled correctly as per connection Mode
   4. Streaming metaData from FFT spectrum.(rpm and gRange)
   5. DSP assigned to FDSP
   6. Disabled all the Battery Operation functionalities
   7. Disabled the write operation of spectral features on BMD serial
   8. Disabled the periodic hash publication mechanism
   9. When device (mainly ESP) memory gets corrupted, device will detect the no operation condition and perform self upgrade
      by reflashing main and Wi-Fi firmware (from stored binaries in the device)
   10. Configurable Audio Offset and Audio Scaling parameters for Audio calibration
   11. Velocity RPM peak calculation logic changed, to reduce run time memory usage during computation
   12. After OTA device changed his MQTT configs, moved from UAT to Production
   13. Sending Config "all" request after every set CONFIG_REQUEST_TIMEOUT interval period(current 4Hrs)
   14. Added logic for configuring both Low and High Cut Off Frequency
   15. Added logic for applying thresholds on spectral features with device LED indication on LED.
   16. Added Support of  Secured and non-secured MQTT and HTTP connections
   17. Variation in Spectral features output (RPM correction )
   18. Getting FFT response code -11 after GET-FFT (hotfix)
   19. Used Auto certificate manage for OEM https endpoint. ( TATA)

##### Features Requirements
   1. Configurable Audio Offset and Audio Scaling.
   2. Make sure the device mqtt and http available configs will remain unmodified
   3. Configurable Low and High cut off frequency
   4. Allow all series of BLE MAC ID
   5. Thresholds on spectral features
   6. Device Indication for spectral features state
   7. Add support of secured and non-secured client connection for FFT and data streaming
   8. Added RPM on FFT spectrum ( Metadata)
   9. Added support for Auto certificate manage in case of OEM https endpoint. ( TATA)

##### Feature Description
   1. Added configuration for Low and High cut off frequency in FFT Json .
   2. Its not mandatory config
   3. The conditions for low and high cut off frequency will be checked on current SR.
   4. Removed filters for BLE MAC ID, so that it can allow any series of MAC ID.
   5. Starting BLE MAC ID series with '00' is not allowed.
   6. Added Logic to apply thresholds on configured spectral features.
   7. According to the thresholds , the spectral state will be computed.
   8. The computed spectral state will be compared with opstate.
   9. The state which is greater will be considered for LED indication in runtime.
   10. Added Logic to send metaData Json on FFT spectrum
   11. First metaData will send on HTTP/HTTPS and after that FFT data will stream
   12. ACK and httpStatus Code is publish on command_response topic of MQTT 
   13. FDSP assigned to DSP
   14. Make sure the device mqtt and http available configs will remain unmodified.
   15. Added the mechanism to get the configurations from the back-end on every boot-up and set periodic interval of 4 Hrs

##### Issue Resolved
   1. Blocking BLE MAC ID series starting with other than '9' or '6'.
   2. V2.0: Spectral feature RMS value fluctuates from zero to actual
   3. Metadata Timestamp Fix
   4. Audio Calibration
   5. Periodic FFT getting missed due to -11 http error code (increased the tcp timeout to 15 sec)
   6. Certificate Migration fix
   7. Regular FFT flag fixed due to secure -unsecure Mode.
   8. Change in FFT configuration was causing device stuck due to memory failure in new rpm algorithm
   9. Workaround of Self-OTA is provided for wifi not connecting issue.
   10. Automatic switch to server after OTA.
   11. BSF Spectral fix

##### JIRA No
   - IF 204,IF-205(3),IF-209
   - IUINTERNAL 1868, IUINTERNAL-1919, IUINTERNAL 1750,IUINTERNAL-1906,IUINTERNAL-1736 (Workaround solution),IUINTERNAL - 1877,IUINTERNAL-1919,IUINTERNAL-1969,IUINTERNAL-1492, IUINTERNAL -1449, IUINTERNAL- 1428, IUINTERNAL - 1622,IUINTERNAL-1359,IUINTERNAL-1700, IUINTERNAL- 1453, 

##### TODO
   - If_ confusion persists, change the LED color indication for spectral state.
##### Limitation
   - Unable to differentiate the shown LED indication i.e its because of spectral state or opstate.
   - Impact of auto certificate management is on dual destination.


#################################################################################################################################################################################
Date: 08 JUNE 2021
Contributed By : Vikas Gaikwad,Sanketa Patil,Sidramayya Swami,Mahendrakumar Shinde 
Product Name : vEdge
Release Name : Porting firmware vEdge2.1 v3.3.0,3.3.1,3.2.0,3.4.0 to vEdge1.6 3.0.6 
Firmware Versions :
		1. vEdge_main(STM32) : 3.0.6
		2. vEdge_wifi (ESP32): 3.0.6
		3. Bootloader L1     : 2.0.0
		4. Bootloader L2     : 2.0.0
		5. Factory Firmware  : 2.0.0 
################################################################################################################################################################################

Release Description :

   1.Device gets stuck after 71 minutes of operation for certain configuration, WIFI/ESP is active but STM is stuck.
   2.Added support for use alternate deviceID in case BMD detection fails.
   3.Use of default WiFi configurations if user config fails and switch between two config
   4.Added device diag information over mqtt message
   5.Resolved the device migration in secured mode from one server to other when credentials are sent from APP. Secured mode credentials (Cert, Diag, MQTT, HTTP, WIFI) are sent with single selection or after Sent credentials after WIFI De-Activate from APP.
   6.wiping the spectral feature result buffer when no fingerprints or empty
   7.Spectral feature RMS value fluctuates from zero to actual
   8.BSF compared with overall vertical (spectral feature more than the Vrms)
   9.Added the JSON validation checks for fingerprint output data
   10.Using m_id in-place of direction flag for spectral features computations
   11.Disabled periodic hash publication

Features Requirements

    1.Device to use alternate ID in case BMD detection fails
    2.Device to use default WIFI config in case user config wifi fails
    3.Added diagnostic error codes
    4.Added getMQTT command to retrieve diag information
    5.Block OTA, if OTA request device ID is not matching with existing/current deviceId stored on flash
    6.Fix temp. value shown as constant across reboot cycle, corrected memory leaks, file close on fail/success case

Feature Description

   - Device to use alternate ID in case BMD detection fails
   - Device to use default WIFI config in case user config wifi fails
   - Added diagnostic error codes
   - Added getMQTT command to retrieve diag information
   - Block OTA, if OTA request device ID is not matching with existing/current deviceId stored on flash

Feature Description

Device to use alternate ID in case BMD detection fails

   - Mode1- BMD detected (On first/regular bootup), deviceID:BMD, APP working
   - Mode2- BMD Failed on first bootup after FW flashing,deviceID:WIFI, APP Not working
   - Mode2- BMD Failed, deviceID:WIFI, APP Not working (deviceID stored in flash when in Mode1 not matching)
   - Mode3- BMD Failed, deviceID:BMD, APP Not working (Use already stored deviceID from flash when in Mode1)

Added default wifi configurations connection

   - On first bootup and FW flashing, create and send default WIFI configuration
   - When user configuration are entered from APP, overwrite config file
   - Switch between Default and User configuration if connection fails

Added diagnostic error codes

   - diagnostic error code for setup operation
   - diagnostic error code for BMD fail case scenarios
   - diagnostic error code for OTA fail case scenarios
   - Block OTA, if OTA request device ID is not matching with existing/current deviceId stored on flash

Issue Resolved

   - wiping the spectralfeature result buffer when no fingerprints or empty
   - spectral feature RMS value fluctuates from zero to actual
   - BSF compared with overall vertical (spectral feature more than the Vrms)
   - Added the JSON validation checks for fingerprint output data
   - Using m_id in-place of direction flag for spectral features computations
   - Disabled periodic hash publication

JIRA No

   - IUINTERNAL 1906,IUINTERNAL 1868,IUINTERNAL- 1359,IUINTERNAL- 1700

TODO

Limitations

#################################################################################################################################################################################
Date: 15 MARCH 2021
Contributed By : Vikas Gaikwad,Sanketa Patil,Sidramayya Swami 
Product Name : vEdge
Release Name : Porting firmware vEdge2.1 v3.3.0 to vEdge1.6 3.0.5 
Firmware Versions :
		1. vEdge_main(STM32) : 3.0.5
		2. vEdge_wifi (ESP32): 3.0.5
		3. Bootloader L1     : 2.0.0
		4. Bootloader L2     : 2.0.0
		5. Factory Firmware  : 2.0.0 
################################################################################################################################################################################

Features Requirements

      1.Enable the 208 Hz and 416 Hz Sampling Rate on LSM
      2.Allowing Data streaming on GET-FFT

Feature Description

      1.Added support for 208 Hz sampling rate @4096 block size
      2.Added support for 416 Hz sampling rate up-to 8192 block size
      3.Handled the validation check for unsupported block size at 208 Hz( 8192 block size is not supported)
      4.Disable the use of calculated sampling for 208 Hz and 416 Hz sampling rate fft configurations.
      5.Continuously Data streaming

Issue Resolved

      1.Allowed Data streaming on FFT mode also.
      2.BLE fix (JIRA - 129)
      3.Allowing Data streaming during FFT (JIRA-1529,1539)
      4.Stop sending config hash request to STM during OTA/cert download mode
      5.Certificate downloading and migrating issue
      6.Synchronized the fingerprint stream with FRES update mechanism
      7.Publish Firmware version issue

JIRA No

      IUINTERNAL-1582, IUINTERNAL-1512, IUINTERNAL-1529, IUINTERNAL-1539, IUINTERNAL - 1497
      IF-182, IF-129, IF-181,IF-189, IF-190,IF-191

TODO

      Permanently fix the BLE stuck issue.

Limitations

      Supported Hardware only v1.5 & v1.6


#################################################################################################################################################################################
Date: 14 DECEMBER 2020
Contributed By : Darshan Mirajkar,Vikas Gaikwad,Sanketa Patil,Sidramayya Swami 
Product Name : vEdge
Release Name : Updates in MQTT,HTTP configs,Certificate download mechanism
Firmware Versions :
		1. vEdge_main(STM32) : 3.0.4
		2. vEdge_wifi (ESP32): 3.0.4
		3. Bootloader L1     : 2.0.0
		4. Bootloader L2     : 2.0.0
		5. Factory Firmware  : 2.0.0 
################################################################################################################################################################################

Features and Enhancement : 
	1.Updated the default lower cutoff frequency of LSM6DSM from 5 Hz to 10Hz (lowCutoff = 10Hz)
	2.Storing MQTT and HTTP Configs in WiFi Flash
	3.Updated FFT retry Mechanism
	4.Download Certificates based on certificate type
	5.Downloads only Available Certificates
	6.Check Internet connection Using ESP32 Ping


#################################################################################################################################################################################
Date: 06 NOVEMBER 2020
Contributed By : Darshan Mirajkar,Vikas Gaikwad,Sanketa Patil,Sidramayya Swami 
Product Name : vEdge
Release Name : Diagnostic Rule Engine and Dual Destination HTTPS endpoint support 
Firmware Versions :
		1. vEdge_main(STM32) : 3.0.3
		2. vEdge_wifi (ESP32): 3.0.3
		3. Bootloader L1     : 2.0.0
		4. Bootloader L2     : 2.0.0
		5. Factory Firmware  : 2.0.0 
################################################################################################################################################################################

Features and Enhancement : 
      1.Configurable Diagnostic Rule Engine on edge
      2.RPM computation on edge across Z-axis
      3.Added USB command to get the wifi mac ID
      4.Improved the frequency accuracy on the edge
      5.Added support to configure the LSM and KX222 g-range from the back-end

         - Configurable g range(LSM : 2, 4, 8, 16 and Kionix KX222 : 8, 16, 32)

      6.Sampling rate For( LSM : 833, 1660, 3330 & Kionix KX222 : 800, 1600, 3200, 6400, 12800, 25600)
      7.Added MQTT command to get the device firmware version
      8.Updated the Temperature validation case to avoid the firmware validation during OTA.
      9.Sending the reportable Diagnostic over the Modbus register
      10.OTA firmware device type validation is added in the firmware.
      11.Sending the Spectral Features over BLE
      12.Resolved the SKF Certificate Download failure issue
      13.Enabled the Phase Angle Computation on Edge
      14.Using the calculated sampling frequency for On-board FFT computations
      15.Updated the topics of diagnostic data streaming and diagnostic alarms and streaming advanced diagnostic data
      16.Disabled the streaming of spectral(fingerprints) features data over MQTT
      17.Added support for sending the raw FFT data on the 2 secure (https) endpoints(JIRA IF-166 mentioned below).
      18.Running RPM is used in Spectral features computations.

BugFixes : 
   - Resolved JIRA 
      IUINTERNAL-1318,1319,1406,1409,1344,1190
      IF-160,164,165,167

Note : This release will work with vEdge v1.6 hardware

#################################################################################################################################################################################
Date: 19 AUGUST 2020
Contributed By : Darshan Mirajkar,Vikas Gaikwad
Product Name : vEdge
Release Name : Signal Energy Faractional part hot fix 
Firmware Versions :
		1. vEdge_main(STM32) : 3.0.2
		2. vEdge_wifi (ESP32): 3.0.1
		3. Bootloader L1     : 2.0.0
		4. Bootloader L2     : 2.0.0
		5. Factory Firmware  : 2.0.0 
################################################################################################################################################################################

HotFixe : 
      1. Apply the hotfix for issue missing signal energy fractional part , which was blocking the dial gauage on the dashboard. 


#################################################################################################################################################################################
Date: 29 JUNE 2020
Contributed By : Darshan Mirajkar,Vikas Gaikwad
Product Name : vEdge
Release Name : vEdgeSecurity(MQTTS/HTTPS/NetworkAuthentication Types) bug fixes 
Firmware Versions :
		1. vEdge_main(STM32) : 3.0.1
		2. vEdge_wifi (ESP32): 3.0.1
		3. Bootloader L1     : 2.0.0
		4. Bootloader L2     : 2.0.0
		5. Factory Firmware  : 2.0.0 
################################################################################################################################################################################

BugFixes : 
      1. Resolved the issue of missing Periodic FFT due to https client connection refused in runtime.

Enahancement :
      1. Enhanced the MQTT re-connection logic.
      2. Added USB Command to get certificate configs.
      3. Increased ESP32 EEPROM Size to 4 Bytes to handled the  mqtt disconnection issue.



#################################################################################################################################################################################
Date: 29 May 2020
Contributed By : Sidramayya Swami,Darshan Mirajkar,Vikas Gaikwad
Product Name : vEdge
Release Name : vEdgeSecurity(MQTTS/HTTPS/NetworkAuthentication Types) and LOR3200 and Memory Optimization 
Firmware Versions :
		1. vEdge_main(STM32) : 3.0.0
		2. vEdge_wifi (ESP32): 3.0.0
		3. Bootloader L1     : 2.0.0
		4. Bootloader L2     : 2.0.0
		5. Factory Firmware  : 2.0.0 
################################################################################################################################################################################

vEdge MQTT and Network Security release
Features

vEdge Secure
   - Provision to configure the common http endpoint from Android app, USB.
   - Provision to configure the diagnostic http endpoint to published the diagnostic messages in case mqtt is not connected.
   - Implemented basic username , password based http authentication.
   - Build the Certificate Downloading mechanism for MQTT TLS , EAP TLS, SSL(https)
   - Certificate Upgrade mechanism is build.
   - Certificate checksum validation and config message validation is build.
   - Build the certificate switching mechanism (update the alternate certificates ).
   - Added the support of multiple error codes, reason codes, and status messages like ota.
   - MQTT and WIFI connection status are separated.
   - Added the new BLE command and ACK messages.
   - Enabled the HTTPS connection for RAW Data Transmission.
   - Handled the OTA migration cases for Non-Secure to Secure firmware release.
   - Replaced the Default HTTPS and MQTT non-secure endpoints with Secure endpoints and secure server.
LOR3200
   - Added support for LOR 3200.
   - WIPE the unused firmware source files.
   - Memory Footprint of STM32 is optimized for new feature additions.
Enahancement
   - BLE Advertising name updated.
   - Added WiFi Config to ESP32 Internal Flash memory
   - Added Domain name support to MQTT Server
   - Added IP Support to MQTT Server
   - Changed message format of WiFi configuration to JSON.
   - Added WiFi Connection Based on Network Authentication type.
   - Added Validation for WiFi Configuration.
   - Added Validation for HTTPS Configuration.
   - Added WiFi configuration to Flash recovery.
   - Added WiFiConfig Commands.
   - Added support for ESP32 internal and STM32 Internal Flash Erase USB Commands.
   - Added the mechanism to update the MODBUS Connection , Disconnection status over BLE.
   - Added Retry mechanism to send the FFT raw data over https.
   - Updated the logic to handled the invalid BLE MAC ID response (ex. 00:00:00:00:00:00)
   - Added support to handled the combination of certificates like set of 3 and set of 5 certificates Downloading from certificate manager.
   - Added the mechanism to sync the wifi configuration in STM32 and ESP32 with periodic HASH verification ( every 5 Sec)
   
BugFixes : 
   - OTA Upgrade successful message missing fixed added
   - BLE mac_response not available on device boot fixed
   - Compatibility of wifi config for v2.1.0 added
   - Wifi Authentication type switching from STATIC-NONE to NONE and NONE - STATIC-NONE fixed is added.
   - MQTT reconnection logic is updated to perform the reconnection attempts.
   - Added the fixed to address the diagnostic status api without http:// or https:// header.

Limitations :

   - Audio running with 4000 Hz Sampling Rate.
   - Secure Firmware release consumes more network bandwidth compare to non-secure communication (Due to TLS and HTTPS overhead)
   - No Backward compatibility possible with this binaries.(won't work for firmware version < 3.0.0 )
   - No Rollback Possible once firmware upgrade from 2.1.0 to 3.0.0
Future Enhancement :

   - Reduce the device boot-up time.

   
#################################################################################################################################################################################
Date: 12 March 2020
Contributed By : Sidramayya Swami,Darshan Mirajkar,Vikas Gaikwad
Product Name : vEdge
Firmware Versions :
		1. vEdge_main(STM32) : 2.1.0
		2. vEdge_wifi (ESP32): 2.1.0
		3. Bootloader L1     : 2.0.0
		4. Bootloader L2     : 2.0.0
		5. Factory Firmware  : 2.0.0 
################################################################################################################################################################################

Features

Configurable MODBUS RTU capabilities:

   1.Supported Slave ID : 1 - 127
   2.Supported Baud Rates : 1200 to 115200 bps
   3.Parity - ODD,EVEN, NONE
   4.Stop bit : 1
   5.Data Length : 8 bit

Features Supported :

   1.Streaming Features data over MODBUS.
   2.Streaming fingerprints data over MODBUS in key, value pair stored in the register map.
   3.Updates the Device Specific parameters like Sampling Rate, Block Size, Lower and Higher cutoff frequencies, Firmware version etc.
   4.Supports Read only Modbus configuration parameters like Slave ID, baud rates, parity, data length etc.
   5.Added the feature to sync the current modbus slave configurations to android app on connect.
   6.Supports MODBUS configuration over Mobile Application only(can be configurable over MQTT as well )
   7.Default device works as Modbus slave with below default configurations :
        Slave ID : 51
        Baud Rate : 9600
        Data bit - 8
        Stop bit - 1
        Parity - NONE

Minor Fixes:

    1.Updated the the Flash recovery mechanism to resolved the device hang issue after applying mqtt and http configs first time.
    2.Updated the BLE MACID validation case.
    3.Updated the Fingerprint calculations as per v1.1.4(using RMS formula to compute the fingerprints)
    4.Added the WiFi RSSI indication as per v1.1.4 (Displays the Purple color for 3 sec if RSSI < -70 dbm)
    5.Removed the multiple file read calls to read the fingerprints configurations.
    6.Corrected the firmware version JSON format published to iu_error on MQTT connect /reconnect.
    7.Updated the default MQTT and HTTP endpoint details all vEdge devices will points to IDAP2.0

Limitations : 
   1. MODBUS RTU device does not support baud rates > 115200.
   2. Currently does not support Datalenght of 7 bit option.
   3. Currently does not support Stop bit 2 option.
   
#################################################################################################################################################################################
Date: 16 December 2019
Contributed By : Mahendrakumar Shinde, Darshan Mirajkar,Vikas Gaikwad
Product Name : vEdge
Firmware Versions :
		1. vEdge_main(STM32) : 2.0.0
		2. vEdge_wifi (ESP32): 2.0.0
		3. Bootloader L1	 : 2.0.0
		4. Bootloader L2     : 2.0.0
		5. Factory Firmware  : 2.0.0 
################################################################################################################################################################################

Features

1. KX222 SPI driver development.
2. Over The Air Firmware Upgrades.
   Development of Bootloader L1 to switch between the multiple firmware partitions.
   Development of Bootloader L2 for firmware up-gradations.
   Allocated space for main firmware is 620 KB STM32 ROM.
   Memory Allocated for Factory Firmware allocated 168 KB STM32 ROM space.
   Allocated 2 KB STM32 ROM space for boot-loader flags.
   Implemented the Internal rolback in case firmware up-gradation failed.
   Implemented the Forced rollback mechanism on device.
   Generating the Firmware validation history log.
3.ESP32 WiFi Firmware porting and development.
4.Modified the Firmware data pipeline , executing the task in serial manner , data acquisition happens in serial manner.
5.Added fix for external Flash auto-recovery.
6.Added support of higher sampling rates and support Fmax upto 8.1 KHz in X & Y axis and 5 KHz in Z-axis.
7.Added support to switch between the Low frequency and High Frequency accelerometer based on configurations.
8.Added support to acquire the TMP116 temperature data from different I2C bus.

Bug fixes :

1.Modified the logic to compare the httpConfigs and added checks to compare the port and http path.
2.Resolved the issue of writing the {} empty JSON to device.conf.
3.Handle the case of reading incorrect BLE MAC address.

Minor Changes:

1.Modified the mechanism to get the SAMPLING RATE, BLOCK SIZE, FIRMWARE VERSION from HOST device.
2.Added new USB Command support.
  Storing the MQTT and http configurations to STM32 Internal Flash memory as a backup in case of external FLASH memory failure, allocated 8 KB STM32 ROM memory space.
3.Updated the WiFi Auto re-connection logic.

NOTE: After Auto recovery of External FLASH memory user won't be able to get the benefits of below features.

1.Can't perform the Rollback until next successful OTA.
2.Can't perform the Forced Rollback next successful OTA.
3.Loose the Previous spectral features configurations until server sends previous configurations.




-------------------------------------------------------------------END OF IDE+ Firmware Release ---------------------------------------------------------------------------------



# This file tell about all the Firmware Release of IDE+
#################################################################################################################################################################################
Date: 7 August 2019
Contributed By : Manas Kale, Shubham Punekar
Special thanks to : Pranjal Bisht, Vikas Gaikwad, Darshan Mirajkar, Mahendrakumar Shinde, Sumit Sharma
Firmware Versions :
		1. IDE+ Version : 1.1.3
		2. Wifi Version : 1.0.6
################################################################################################################################################################################
Features:
	1. Added support for configurable block size (from 512 to 4096).
	2. Added support for configurable sampling rate (from 833Hz to 3330Hz).
	3. Configuration message for above two parameters can be sent via USB,MQTT or BLE with acknowledgements 
	   received on MQTT and BLE.
	4. HTTP raw data is now streamed in binary format separately for each axis.
	5. Exposed device configuration details over MQTT and BLE, command to fetch details can be passed via USB, MQTT and              BLE.
	6. Real time data send rate(DSP) and raw data publication period(RAW) are now configurable over 
	   USB, MQTT and BLE with acknowledgement over MQTT.
	7. Diagnostic fingerprints now are generic and include varying block size and sampling rates.

Bug Fixes:
	1. Calibration utility NaN errors have been fixed.
	2. Fixed naming error for displacement computer (dispRMS512Y).
	3. Fixed OpStateComputer - a new state is computed when any activated feature is ready.

#################################################################################################################################################################################

Date: 22 June 2019
Contributed By : Vikas Gaikwad,Darshan Mirajkar
Firmware Versions : 
		1. IDE+ Version : 1.1.2
		2. Wifi Version : 1.0.5
################################################################################################################################################################################
Features:

  1. Added support Wired(ETHERNET)on-prem solution.
  2. Added support for Runtime selection of available hardware components. 
  3. Included basic USB commands to support on-site troubleshooting.

#################################################################################################################################################################################

Date: 16 May 2019
Contributed By : Shubham Punekar,Manas Kale, Vikas Gaikwad
Firmware Versions : 
		1. IDE+ Version : 1.1.1
		2. Wifi Version : 1.0.5
################################################################################################################################################################################
Features:

  1. Ability to send large data packets (upto 800 byte) from Android to IDE over BLE. This infrastructure will immediately be useful for configuring http/MQTT end points over bluetooth.
  2. Configuring calibration offsets for Audio and temperature over bluetooth.

Bug fixes

  1.Feature thresholds will now persist across reboots 
  2.Intermittent Wifi resets will reduce significantly. (our stress tests indicate something like once in a day or two)
  3.Device will no longer reset on any power source (laptop or power socket).

#################################################################################################################################################################################

Date: 25 April 2019
Submitted By : Shubham Punekar
Firmware Versions : 
		1. IDE+ Version : 1.1.0
		2. Wifi Version : 1.0.4
################################################################################################################################################################################


Fixed :
1. IDE fetches BLE MAC address automatically. 

Improvement required: 
1. Workinprogress on WIFI Disconnect.

Notes:
1. If application tries to connect to IDE right after flashing, then BLE might be irresponsive. (Note this happens very rarely.)
   However if the IDE is connected to a power adapter after flashing, it connects to application successfully and this issue does not occur.
2. In case sum of amplitudes from frequency domain are zero within the configured band value for respective fingerprints, the JSON will not have the respective keys and values in the output JSON.

#################################################################################################################################################################################

Date: 17 April 2019
Submitted By : Shubham Punekar & Vikas Gaikwad 
Firmware Versions : 
		1. IDE+ Version : 1.0.9
			2. Wifi Version : 1.0.4
################################################################################################################################################################################


Fixed :
1. IDE switches to BLE advertising mode if android application disconnects from IDE. 
2. IDE switches to BLE advertising mode after 15 seconds if android application is terminated or goes out of range.
3. IDE can reconnect with the android application via BLE again after disconnecting for the first time.
4. Resolved MQTT subcriber issue by increasing the STM32 Uart RX buffer size from 64 Bytes to 512 Bytes.
5. Resolved the issue with missing fingerprints in the published JOSN messages.

Improvement required: 
1. BLE is not responsive after connecting to app.Note this happens very rarely.
2. Workinprogress on WIFI Disconnect.
Note : 
1. In case sum of amplitudes from frequency domain are zero within the configured band value for respective fingerprints, the JSON will not have the respective keys and values in the output JSON.

#################################################################################################################################################################################

Date: 26 March 2019
Submitted By : Vikas Gaikwad
Firmware Versions : 
		1. IDE+ Version : 1.0.8
 	        2. Wifi Version : 1.0.4
################################################################################################################################################################################

 
Fixed :
1. Calibration issue reloved(not receving data from device during the calibration mode)
2. Chanding the sensor data acquition frequency from 3.3KHz to 1.6 KHz during calibration mode and once device is reset it uses 3.3KHz as a default sampling frequency.

Improvement required: 
1. Change the sensor data acquisition from sensor interrupt to Timer interrupt.



#################################################################################################################################################################################

Date: 12 March 2019
Submitted By : Vikas Gaikwad
Firmware Versions : 
		1. IDE+ Version : 1.0.7
 	        2. Wifi Version : 1.0.4
################################################################################################################################################################################

 
Fixed :
1. Setting the http endpoint dynamically to read the pending config messages.

Improvement required: 
1. Improve the wifi connectivity and memory optimization on edge.
2. JSON optimization at edge to handle multiple fingerprints parameters and http configurations.
3. Need to change current device configuration from BLE to Wifi.


#################################################################################################################################################################################

Date: 09 March 2019
Submitted By : Vikas Gaikwad
Firmware Versions : 
		1. IDE+ Version : 1.0.7
 	        2. Wifi Version : 1.0.3
################################################################################################################################################################################

Features : 

1. Included diagnostic fingerprints configurations from App and from Indicus dashboard.
2. Dynamically configurable http and mqtt server configuration.
3. Implemented the acknowledge on every new mqtt and existing command on command_response topic.
4. Sending the acknowledge to android app.
5. Handled the pending device configuration message over http rest api provided by Indicus.
 
 
Fixed :
1. Improved the sampling frequency from 1.6KHz to 3.3KHz
2. Improved the data accuracy and Fmax to 1.6kHz.
3. Improved the getFFT request reliability over mqtt server.

Tested : 
1. Fingerprints configurations from Indicus dashboard.
2. Fingerprint data sending and its accuracy compared with SKF micrologs
3. FFT validation on FAN and Rotor kit at SKF Chennai.

Improvement required: 
1. Improve the wifi connectivity and memory optimization on edge.
2. JSON optimization at edge to handle multiple fingerprints parameters and http configurations.
3. Need to change current device configuration from BLE to Wifi.


#################################################################################################################################################################################

Date: 13 February 2019
Submitted By : Vikas Gaikwad
Firmware Versions : 
		1. IDE+ Version : 1.0.6
 	        2. Wifi Version : 1.0.2
################################################################################################################################################################################

Features : 

1. Increased the sensor samoling frequency from 1600 Hz to 3330 Hz to impvrove vibration measurment accuracy.
2. Added Provision to configure mqtt server configurations from cloud/BLE/USB
3. Added Provision to configure http credentils to the device for FFT raw data collection
4. Wifi flashing can be done without connecting external wire from IO0 to GND.
   Note: Please short the IO0 terminal with PIN 7 (label) on IDE+ board to enable this feature.

5. Tested IDE+ with Indicus and Infinite Uptime patforms for http nd MQTT messages.

Fixed :
1. improved the sucess rate of sending the raw acceleration data to http endpoint. Increased the UART_TX Timeout from 1ms to 3ms




#################################################################################################################################################################################

Date: 28 January 2019
Submitted By : Vikas Gaikwad
Firmware Versions : 
		1. IDE+ Version : 1.0.5
 	        2. Wifi Version : 1.0.1
################################################################################################################################################################################

Feature : 
1. Increased the sensor sampling frequency from 1000Hz to 1600Hz to acheive accurate Arms,Vrms & FFT of signal.
2. LSM6DSM sensor data acquisition system is driven using sensors DATA READY INTERRUPT i.e. at 1600Hz
3. Audio rescaling is done from 30 DB to 120 DB between 60 to 120 DB.
4. Included provision to configure MQTT Server IP and MQTT PORT over Wifi/BLE and USB. On powerup it will configure mqtt from MQTT.conf file from flash.

Required JSON message format:
{"mqtt": {"mqttServerIP":"115.112.92.146","port":1883}}


TODO:

1. Including provision to configure MQTT username & Password as per requirment as shown below..

Under Development :
{"mqtt": {"mqttServerIP":"115.112.92.146","port":1883,"username":"infinite-uptime","password":"8!Nku^6O!2lj2Ge!j9!KrP4gMv"}}

2. Increasing the sensor sampling frequency to max 6.6KHz.





#################################################################################################################################################################################

Date: 17 December 2018
Submitted By : Vikas Gaikwad
Firmware Versions : 
		1. IDE+ Version : 1.0.4
 	        2. Wifi Version : 1.0.1
################################################################################################################################################################################

Feature : 

1. Device Firmware versions managment over cloud.
2. Included the new CUSTOM mode to collect the Raw acceleration data over USB in the custom format as shown below.

Commands :
Start Acquisition : IUGET_DATA
Stop Acquisition  : IUEND_DATA

Start Character   : '$'
Stop Character    : '#'
Data Type         : String
Delimiter         : ',' 

 $<macID>,<accelX>,<accelY>,<accelZ>,<audio>#

example :
$94:54:93:26:90:36,-0.022,-0.013,1.008,-12.000#

Descriptions:

Modified the wifi firmware to read response of MSPCommand and send the running firmware version data to the diagnostic topic on every onConnenct & reConnect to mqtt broker.
   
sampled data received on diagnostic topic as shown below.

{"ide-firmware-version":"1.0.4","wifi-firmware-version":1.0.1","wifi_mac":"60:01:94:B1:21:BA","ble_mac":"94:54:93:26:93:2B","mqtt":"on"}


#################################################################################################################################################################################

Date: 11 December 2018
Submitted By : Vikas Gaikwad
Firmware Versions : 
		1. IDE+ Version : 1.0.3
 	        2. Wifi Version : 1.0.0
################################################################################################################################################################################

Issues : 

1. Temperature rise issue.
2. Audio cutoff to 120 dB.
3. Zero Raw Data in Acceleration X. 


Fixed :

1. Completely resolved the temperature rise issue.  
2. Increased audio cutoff from 120 dB to 160 dB.
3. Resolved the zero raw data issue in acceleration X axis.
 


#################################################################################################################################################################################

Date: 27 October 2018
Submitted By : Vikas Gaikwad
Firmware Versions : 
		1. IDE+ Version : 1.0.2
 	        2. Wifi Version : 1.0.1
################################################################################################################################################################################

Issues/Implementations : 

1. Temperature overflow
2. Audio (Noise) level overflow in the field (> 120 db)
3. Vrms issues.
4. Device Firmware versions managment over cloud 

Fixed : 
  
1. Handled the temperature buffer overflow condition to avoid temperature overflow in LSM6DSM (note temperature range is -40 to + 85 degC only and resolution is 16 bit)
2. Handled the Audio overflow condition by applying the upper cutoff threshold to 120 db in the  AudioDBComputer::m_specializedCompute() method.
3. Vrms mismatch issues handle by implementing Curve fitting formula on raw acceleration values by calculating newAcceleration amplitudes, and removing the mean from amplitudes (note : did this considering FAG meter as a reference of measurment)
4. Imlplementated new MSPCommand to get the latest IDE+ firmware version and send it to Wifi.
5. Modified the wifi firmware to read MSPCommand response and send the new firmware version data to the diagnostic topic on every onConnenct & reConnect to mqtt broker
   Publishing below data to diagnostic topic
  {"IDE-FIRMWARE-VERSION":"1.0.2","WIFI-FIRMWARE-VERSION":1.0.1","wifi_mac":"60:01:94:9C:21:12","MQTT":"on"}



################################################################################################################################################################################
Date : 15 October 2018
Submited By : Vikas Gaikwad
Firmware Versions : 
		1. IDE+ Version : 1.0.1
		2. Wifi Version : 1.0.0
###############################################################################################################################################################################

Issues/Implementations:

1. Vrms issue

Fixed : 

1. Fixed the Vrms issues in the firmware by applying the curve fitting formula 


